<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Untitled Document</title>
<!--    <link rel="stylesheet" href=".css">-->
    <script src="../lib/d3v4/d3.min.js"></script>
    <script src="../lib/jquery-3.2.1.min.js"></script>
    <script src="../lib/utilityfunctions.js"></script>
    <script src="function.js"></script>
    
    <style>
        body { 
            font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
        }
        #chart { 
/*
            background: url(classroom2.jpg) no-repeat center center fixed; 
  -webkit-background-size: cover;
  -moz-background-size: cover;
  -o-background-size: cover;
  background-size: cover;
*/
            
/*            background: #f6e8c3;*/
            margin-left: auto;
            margin-right: auto;
        }
        .nav, .nav1 { 
            position: relative;
            text-transform: uppercase;
            font-size: 80%;
            margin-left: auto;
            margin-right: auto;
            text-align: right;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .nav1 { 
            display: none;
        }
        .nav:hover { 
            cursor: hand;
            cursor: pointer;
            
        }
        
        .barLabels { 
            font-size: 70%; 
            font-weight: bold;
        }
        
        #text { 
            position: absolute; 
            top: 100px; 
            left: 100px;
            z-index: 200;
/*            font-weight: bold; */
            font-size: 120%;
            width: 200px;
/*            text-align: right; */
        }
    </style>
</head>
<body>

<div class="nav step1">Next</div>
<div id ="text">
    Tracking South Africa's learners
</div>
<div id="chart">
    
    
    
</div>


<script>
    
    // set text spacing
    $("document").ready( function () { 
        
        var pos = $("svg").position();
        var dim = $("svg").width();
        console.log(pos)
        console.log(dim)
        
        $("#text").css("left", pos.left + "px")
    
    })
    
    // config
    
    var width = 880,
        height = 480,
        padding = 20;
    
    var gradeBuckets = 1000, 
        colCount = 0,
        rowCount = 0,
        colLimit = 16,
        xPos = 10,
        yPos = height - 30,
        radius = 1.6, 
        spacing = 0.9,
        startXpos = xPos;
    
 


    
    d3.select("#chart")
        .style("width", width + padding * 2 + "px")
        .style("height", height + padding * 2 + "px")
    
    d3.select(".nav")
        .style("width", width + padding * 2 + "px")
//        .style("height", height + padding * 2 + "px")
        
    
    var svg = d3.select("#chart")
        .append("svg")
        .attr("width", width + padding * 2)
        .attr("height", height + padding * 2)
        .append("g")
        .attr("transform", "translate(" + padding + " , " + padding + ")")
    
    
    
    
    
    d3.csv("students.csv", function (data) { 
        data.forEach( function (d) { 
            d.pupils = +d.pupils / gradeBuckets;
        })
        console.log(data);
//        console.log(data.length);
        

        addCircles(data[0].pupils, "grade1", "crimson", true);
        
        for(var c = 1; c < 12; c++) { 
            var i = c + 1; 
        
            addCircles(data[c].pupils, "grade" + i, "#045a8d")
            
        }
        
        spreadCircles();
        
        var count = d3.selectAll(".grade2").size(); 
        console.log(count)


// Navigation 

d3.select(".nav").on("click", function () { 
    
    d3.select("#text").text("1.2 million learners in grade 1 in 2004")
    
//    d3.selectAll(".grade1").style("fill", "crimson")
    makeBars(".grade1", "2004 (G1)", true);
    makeBars(".grade2", "2005")
    makeBars(".grade3", "2006")
    makeBars(".grade4", "2007")
    makeBars(".grade5", "2008")
    makeBars(".grade6", "2009")
    makeBars(".grade7", "2010")
    makeBars(".grade8", "2011")
    makeBars(".grade9", "2012")
    makeBars(".grade10", "2013")
    makeBars(".grade11", "2014")
    makeBars(".grade12", "2015")
    
})
        

        
        
       
        
       
    })
    
    
  
    
    
</script>



</body>
</html>